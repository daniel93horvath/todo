const toBase64 = (str: string) =>
	typeof window === "undefined" ? Buffer.from(str).toString("base64") : window.btoa(str);

// ---- 3. blur-ikon SVG → data-URI ----
const blurSvg = `
  <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60">
    <filter id="b"><feGaussianBlur stdDeviation="8" /></filter>
    <rect width="60" height="60" fill="#E5E7EB" filter="url(#b)" />
  </svg>`;
export const BLUR_DATA_URL = `data:image/svg+xml;base64,${toBase64(blurSvg)}`;

// ---- 3. Fallback-ikon SVG → data-URI ----
const fallbackSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" zoomAndPan="magnify" viewBox="0 0 150 149.999998" height="200" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="ee037cebfa"><path d="M 23.648438 98.964844 L 39.507812 98.964844 L 39.507812 105.699219 L 23.648438 105.699219 Z M 23.648438 98.964844 " clip-rule="nonzero"/></clipPath><clipPath id="c7d21703c5"><path d="M 27.015625 98.964844 L 36.125 98.964844 C 37.019531 98.964844 37.875 99.320312 38.507812 99.953125 C 39.136719 100.582031 39.492188 101.441406 39.492188 102.332031 C 39.492188 103.226562 39.136719 104.082031 38.507812 104.714844 C 37.875 105.34375 37.019531 105.699219 36.125 105.699219 L 27.015625 105.699219 C 26.121094 105.699219 25.265625 105.34375 24.632812 104.714844 C 24.003906 104.082031 23.648438 103.226562 23.648438 102.332031 C 23.648438 101.441406 24.003906 100.582031 24.632812 99.953125 C 25.265625 99.320312 26.121094 98.964844 27.015625 98.964844 Z M 27.015625 98.964844 " clip-rule="nonzero"/></clipPath></defs><path fill="#dfe8f4" d="M 15.75 0 L 134.25 0 C 135.285156 0 136.308594 0.101562 137.324219 0.300781 C 138.335938 0.503906 139.320312 0.804688 140.277344 1.199219 C 141.234375 1.59375 142.140625 2.078125 143 2.65625 C 143.859375 3.230469 144.65625 3.882812 145.386719 4.613281 C 146.117188 5.34375 146.769531 6.140625 147.34375 7 C 147.921875 7.859375 148.40625 8.765625 148.800781 9.722656 C 149.195312 10.679688 149.496094 11.664062 149.699219 12.675781 C 149.898438 13.691406 150 14.714844 150 15.75 L 150 134.25 C 150 135.285156 149.898438 136.308594 149.699219 137.324219 C 149.496094 138.335938 149.195312 139.320312 148.800781 140.277344 C 148.40625 141.234375 147.921875 142.140625 147.34375 143 C 146.769531 143.859375 146.117188 144.65625 145.386719 145.386719 C 144.65625 146.117188 143.859375 146.769531 143 147.34375 C 142.140625 147.921875 141.234375 148.40625 140.277344 148.800781 C 139.320312 149.195312 138.335938 149.496094 137.324219 149.699219 C 136.308594 149.898438 135.285156 150 134.25 150 L 15.75 150 C 14.714844 150 13.691406 149.898438 12.675781 149.699219 C 11.664062 149.496094 10.679688 149.195312 9.722656 148.800781 C 8.765625 148.40625 7.859375 147.921875 7 147.34375 C 6.140625 146.769531 5.34375 146.117188 4.613281 145.386719 C 3.882812 144.65625 3.230469 143.859375 2.65625 143 C 2.078125 142.140625 1.59375 141.234375 1.199219 140.277344 C 0.804688 139.320312 0.503906 138.335938 0.300781 137.324219 C 0.101562 136.308594 0 135.285156 0 134.25 L 0 15.75 C 0 14.714844 0.101562 13.691406 0.300781 12.675781 C 0.503906 11.664062 0.804688 10.679688 1.199219 9.722656 C 1.59375 8.765625 2.078125 7.859375 2.65625 7 C 3.230469 6.140625 3.882812 5.34375 4.613281 4.613281 C 5.34375 3.882812 6.140625 3.230469 7 2.65625 C 7.859375 2.078125 8.765625 1.59375 9.722656 1.199219 C 10.679688 0.804688 11.664062 0.503906 12.675781 0.300781 C 13.691406 0.101562 14.714844 0 15.75 0 Z M 15.75 0 " fill-opacity="1" fill-rule="nonzero"/><path fill="#d9d9d9" d="M 150 134.375 L 150 98.53125 L 135.875 84.375 C 135.503906 84.003906 135.113281 83.648438 134.703125 83.316406 C 134.296875 82.980469 133.875 82.667969 133.4375 82.375 C 133 82.082031 132.546875 81.8125 132.082031 81.566406 C 131.617188 81.316406 131.140625 81.089844 130.65625 80.890625 C 130.167969 80.6875 129.671875 80.511719 129.167969 80.359375 C 128.664062 80.207031 128.15625 80.078125 127.636719 79.976562 C 127.121094 79.871094 126.601562 79.796875 126.078125 79.742188 C 125.550781 79.691406 125.027344 79.667969 124.5 79.667969 C 123.972656 79.667969 123.449219 79.691406 122.921875 79.742188 C 122.398438 79.796875 121.878906 79.871094 121.363281 79.976562 C 120.84375 80.078125 120.335938 80.207031 119.832031 80.359375 C 119.328125 80.511719 118.832031 80.6875 118.34375 80.890625 C 117.859375 81.089844 117.382812 81.316406 116.917969 81.566406 C 116.453125 81.8125 116 82.082031 115.5625 82.375 C 115.125 82.667969 114.703125 82.980469 114.296875 83.316406 C 113.886719 83.648438 113.496094 84.003906 113.125 84.375 C 112.75 84.746094 112.359375 85.101562 111.953125 85.433594 C 111.546875 85.769531 111.121094 86.082031 110.683594 86.375 C 110.242188 86.667969 109.792969 86.9375 109.328125 87.1875 C 108.863281 87.433594 108.386719 87.660156 107.898438 87.863281 C 107.410156 88.0625 106.914062 88.242188 106.410156 88.394531 C 105.90625 88.546875 105.394531 88.675781 104.875 88.777344 C 104.359375 88.878906 103.835938 88.957031 103.3125 89.007812 C 102.789062 89.0625 102.261719 89.085938 101.734375 89.085938 C 101.207031 89.085938 100.679688 89.0625 100.15625 89.007812 C 99.632812 88.957031 99.109375 88.878906 98.59375 88.777344 C 98.074219 88.675781 97.5625 88.546875 97.058594 88.394531 C 96.554688 88.242188 96.058594 88.0625 95.570312 87.863281 C 95.082031 87.660156 94.605469 87.433594 94.140625 87.1875 C 93.675781 86.9375 93.226562 86.667969 92.785156 86.375 C 92.347656 86.082031 91.921875 85.769531 91.515625 85.433594 C 91.109375 85.101562 90.71875 84.746094 90.34375 84.375 L 62.6875 56.71875 C 62.316406 56.347656 61.925781 55.992188 61.515625 55.660156 C 61.109375 55.324219 60.6875 55.011719 60.25 54.71875 C 59.8125 54.425781 59.359375 54.15625 58.894531 53.910156 C 58.429688 53.660156 57.953125 53.433594 57.46875 53.234375 C 56.980469 53.03125 56.484375 52.855469 55.980469 52.703125 C 55.476562 52.550781 54.96875 52.421875 54.449219 52.320312 C 53.933594 52.214844 53.414062 52.140625 52.890625 52.085938 C 52.363281 52.035156 51.839844 52.011719 51.3125 52.011719 C 50.785156 52.011719 50.261719 52.035156 49.734375 52.085938 C 49.210938 52.140625 48.691406 52.214844 48.175781 52.320312 C 47.65625 52.421875 47.148438 52.550781 46.644531 52.703125 C 46.140625 52.855469 45.644531 53.03125 45.15625 53.234375 C 44.671875 53.433594 44.195312 53.660156 43.730469 53.910156 C 43.265625 54.15625 42.8125 54.425781 42.375 54.71875 C 41.9375 55.011719 41.515625 55.324219 41.109375 55.660156 C 40.699219 55.992188 40.308594 56.347656 39.9375 56.71875 L 0 96.6875 L 0 134.375 C 0 135.402344 0.101562 136.417969 0.300781 137.421875 C 0.5 138.429688 0.796875 139.40625 1.1875 140.355469 C 1.582031 141.300781 2.0625 142.203125 2.632812 143.054688 C 3.203125 143.910156 3.851562 144.699219 4.578125 145.421875 C 5.300781 146.148438 6.089844 146.796875 6.945312 147.367188 C 7.796875 147.9375 8.699219 148.417969 9.644531 148.8125 C 10.59375 149.203125 11.570312 149.5 12.578125 149.699219 C 13.582031 149.898438 14.597656 150 15.625 150 L 134.375 150 C 135.402344 150 136.417969 149.898438 137.421875 149.699219 C 138.429688 149.5 139.40625 149.203125 140.355469 148.8125 C 141.300781 148.417969 142.203125 147.9375 143.054688 147.367188 C 143.910156 146.796875 144.699219 146.148438 145.421875 145.421875 C 146.148438 144.699219 146.796875 143.910156 147.367188 143.054688 C 147.9375 142.203125 148.417969 141.300781 148.8125 140.355469 C 149.203125 139.40625 149.5 138.429688 149.699219 137.421875 C 149.898438 136.417969 150 135.402344 150 134.375 Z M 150 134.375 " fill-opacity="1" fill-rule="nonzero"/><path fill="#ffffff" d="M 120.25 43 C 120.25 43.957031 120.15625 44.90625 119.96875 45.847656 C 119.78125 46.785156 119.503906 47.699219 119.140625 48.585938 C 118.773438 49.46875 118.324219 50.3125 117.789062 51.109375 C 117.257812 51.90625 116.652344 52.640625 115.976562 53.320312 C 115.296875 53.996094 114.5625 54.601562 113.765625 55.132812 C 112.96875 55.667969 112.125 56.117188 111.242188 56.484375 C 110.355469 56.847656 109.441406 57.125 108.503906 57.3125 C 107.5625 57.5 106.613281 57.59375 105.65625 57.59375 C 104.699219 57.59375 103.75 57.5 102.808594 57.3125 C 101.871094 57.125 100.957031 56.847656 100.070312 56.484375 C 99.1875 56.117188 98.34375 55.667969 97.546875 55.132812 C 96.75 54.601562 96.015625 53.996094 95.335938 53.320312 C 94.660156 52.640625 94.054688 51.90625 93.523438 51.109375 C 92.988281 50.3125 92.539062 49.46875 92.171875 48.585938 C 91.808594 47.699219 91.53125 46.785156 91.34375 45.847656 C 91.15625 44.90625 91.0625 43.957031 91.0625 43 C 91.0625 42.042969 91.15625 41.09375 91.34375 40.152344 C 91.53125 39.214844 91.808594 38.300781 92.171875 37.414062 C 92.539062 36.53125 92.988281 35.6875 93.523438 34.890625 C 94.054688 34.09375 94.660156 33.359375 95.335938 32.679688 C 96.015625 32.003906 96.75 31.398438 97.546875 30.867188 C 98.34375 30.332031 99.1875 29.882812 100.070312 29.515625 C 100.957031 29.152344 101.871094 28.875 102.808594 28.6875 C 103.75 28.5 104.699219 28.40625 105.65625 28.40625 C 106.613281 28.40625 107.5625 28.5 108.503906 28.6875 C 109.441406 28.875 110.355469 29.152344 111.242188 29.515625 C 112.125 29.882812 112.96875 30.332031 113.765625 30.867188 C 114.5625 31.398438 115.296875 32.003906 115.976562 32.679688 C 116.652344 33.359375 117.257812 34.09375 117.789062 34.890625 C 118.324219 35.6875 118.773438 36.53125 119.140625 37.414062 C 119.503906 38.300781 119.78125 39.214844 119.96875 40.152344 C 120.15625 41.09375 120.25 42.042969 120.25 43 Z M 120.25 43 " fill-opacity="1" fill-rule="nonzero"/><g clip-path="url(#ee037cebfa)"><g clip-path="url(#c7d21703c5)"><path fill="#d9d9d9" d="M 23.648438 98.964844 L 39.484375 98.964844 L 39.484375 105.699219 L 23.648438 105.699219 Z M 23.648438 98.964844 " fill-opacity="1" fill-rule="nonzero"/></g></g></svg>`;
export const FALLBACK_DATA_URL = `data:image/svg+xml;base64,${toBase64(fallbackSvg)}`;
